# 缓存Cache-Control

### 可缓存性
* public
> http 经过的任何地方都可以进行缓存，如浏览器客户端、代理服务器...
* private
> 仅发起请求的浏览器可以进行缓存
* no-cache
> 不允许缓存

### 到期
> 到期时间过了之后，请求会重新到达服务器进行请求
* `max-age=<seconds>`
* `s-maxage=<secoonds>` 是给代理服务器使用，在代理服务器中会替换`max-age`
* `max-stale=<seconds>` 是发起端设置的（浏览器不会主动发起这货，所以**浏览器中不可用**），表示如果到了过期时间后，但是还在`max-stale`之中，还是可以冲缓存中读取数据

### 重新验证
* `must-revalidate` 过期之后必须去源服务器重新请求
* `proxy-revalidate` 代理服务器在缓存过期之后必须去源服务器请求一遍

### 其他
* `no-store` 和`no-cache`进行区分，`no-cache`其实也可以使用本地缓存，但是要每次通过服务器认证之后，服务器告诉请求者(浏览器、代理服务器)可以使用本地缓存。而`no-store`是必须使用服务器返回的数据
* `no-transform` 告诉代理服务器或者浏览器不要进行转换或者压缩等等的操作

### 常见问题
Q：对于一些静态文件，比如一些js，css文件想把他们缓存到本地，不用每次请求服务器。但是js，css文件里面的内容改变了，浏览器不知道从而还会从缓存里面读取数据，导致线上的代码不能及时做到更新，怎么处理？
A：通过一些构建工具打包出来的文件，可以设置一些hash值来使浏览器去获取更新后的文件（因为浏览器是以请求的路径去判断是否有缓存可用的）
