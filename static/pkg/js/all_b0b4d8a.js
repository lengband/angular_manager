;/*!js/nav/nav.js*/
define("js/nav/nav",function(require){var A=require("js/init");A.controller("navCtrl",function($scope){window.onscroll=null,console.log("111"),$scope.toggleList=function(e){var dom=$(e.target);dom.siblings().slideToggle()}})});
;/*!js/router.js*/
define("js/router",function(require){require("js/init").config(function($stateProvider){$stateProvider.state("home",{url:"/",templateUrl:"js/home/home.tpl",controller:"homeCtrl"}).state("login",{url:"/login",templateUrl:"js/login/login.tpl",controller:"loginCtrl"}).state("userList",{url:"/userlist/:pageNum",templateUrl:"js/user/list/list.tpl",controller:"userListCtrl"}).state("userDetail",{url:"/userdetail/:userId",templateUrl:"js/user/detail/detail.tpl",controller:"userDetailCtrl"}).state("newsList",{url:"/newslist/:pageNum",templateUrl:"js/news/list/list.tpl",controller:"newsListCtrl"}).state("newsDetail",{url:"/newsdetail/:newsId",templateUrl:"js/news/detail/detail.tpl",controller:"newsDetailCtrl"}).state("createNews",{url:"/createnews",templateUrl:"js/news/create/create.tpl",controller:"createNewsCtrl"}).state("albums",{url:"/albums",templateUrl:"js/albums/albums.tpl",controller:"albumsCtrl"}).state("msg",{url:"/msg",templateUrl:"js/msg/msg.tpl",controller:"msgCtrl"}).state("mail",{url:"/mail/:pageNum",templateUrl:"js/mail/mail.tpl",controller:"mailCtrl"})}).run(function($rootScope,$http,$location){$http.get("action/checkLogin.php").success(function(res){res&&0===res.errno&&res.data?($rootScope.username=res.data.username,$location.path("/")):$location.path("/login")}),$rootScope.isShowNav=!1,$rootScope.$on("$stateChangeSuccess",function(){void 0===$rootScope.username?$location.path("/login"):$rootScope.isShowNav=!0}),$rootScope.$on("$stateChangeSuccess",function(){var path=$location.$$path.slice(1);$rootScope.path=path.split("/")})}).service("Observer",function(){var __message={};this.regist=function(type,fn){__message[type]?__message[type].push(fn):__message[type]=[fn]},this.fire=function(type){var arg=[].slice.call(arguments,0);if(__message[type])for(var i=0;i<__message[type].length;i++)__message[type][i].apply(null,arg)}})});
;/*!js/login/login.js*/
define("js/login/login",function(require){var A=require("js/init");A.controller("loginCtrl",function($scope,$http,$location,$rootScope){window.onscroll=null,$scope.goLogin=function(){$(".accounts").animate({opacity:0},700,function(){$(".accounts").css({display:"none"}),$("#login").css({display:"block"})})},$scope.goToLogin=function(){$(".app-login").animate({opacity:0},1e3,function(){$http.post("action/login.php",$scope.data).success(function(res){res&&0===res.errno?($rootScope.username=res.data.username,$location.path("/")):alert("登录失败")})})}})});
;/*!js/home/home.js*/
define("js/home/home",function(require){var A=require("js/init");A.controller("homeCtrl",function($scope,$interval){window.onscroll=null,$(".main .container .hightCharts").highcharts({chart:{type:"spline",events:{load:function(){var series=this.series[0];$interval(function(){series.addPoint(parseInt(10*Math.random()),!0,!0)},2e3)}}},title:{text:'<i class="glyphicon glyphicon-signal"></i>近期销售统计',style:{color:"#4383b4",fontSize:"20px"},x:-210},series:[{data:function(){for(var arr=[],i=0;10>i;i++)arr.push(parseInt(10*Math.random()));return arr}()}],yAxis:{title:{text:"波动百分比",style:{color:"#4383b4",fontSize:"16px"},y:50},labels:{format:"{value}%"}},credits:{text:"冷板凳",href:"http://www.cnblogs.com/bandeng/",style:{color:"#4383b4",fontSize:"20px"},position:{x:-20}}}),$scope.toTwo=function(n){return 10>n?"0"+n:""+n};var clock=document.getElementById("clock"),aImg=clock.getElementsByTagName("img");$scope.fnTime=function(){for(var myTime=new Date,iHours=myTime.getHours(),iMin=myTime.getMinutes(),iSec=myTime.getSeconds(),str=$scope.toTwo(iHours)+$scope.toTwo(iMin)+$scope.toTwo(iSec),i=0;i<str.length;i++)aImg[i].src="images/clock/"+str.charAt(i)+".JPG"},$scope.fnTime(),$interval($scope.fnTime,1e3)})});
;/*!js/mail/mail.js*/
define("js/mail/mail",function(require){var A=require("js/init");A.controller("mailCtrl",function($scope,$http,$stateParams){window.onscroll=null,$scope.changeStar=function(e){e.target.className="glyphicon glyphicon-star changeBig"===e.target.className?"glyphicon glyphicon-star-empty":"glyphicon glyphicon-star changeBig"},$scope.num=$stateParams.pageNum,$http.get("action/mailList.json",{params:{num:$scope.num}}).success(function(res){res&&0===res.errno&&($scope.listfuben=res.data,$scope.list=$scope.listfuben)}),$scope.chooseAll=function(){$(".tab-content .row").find("input[type='checkbox']").attr("checked","checked")},$scope.chooseNone=function(){$(".tab-content .row").find("input[type='checkbox']").attr("checked",!1)},$scope.search=function(e){$(e.currentTarget).next().css("color","#337ab7"),$(e.currentTarget).keyup(function(event){13===event.keyCode&&(console.log($(e.currentTarget).val()),$scope.list.forEach(function(value){value.name==$(e.currentTarget).val()?$scope.list=[value]:""===$(e.currentTarget).val()&&($scope.list=$scope.listfuben)}))})},$scope.write=function(){$('#myTabs a[href="#Sent"]').tab("show")},$scope.lockBold=!0,$scope.lockItalic=!0,$scope.lockFont=!0,$scope.lockLeft=!0,$scope.lockCenter=!0,$scope.lockRight=!0,$scope.bold=function(e){$(e.currentTarget).toggleClass("active"),$scope.lockBold?($("#textareaWP textarea").css("fontWeight","bold"),$scope.lockBold=!1):($("#textareaWP textarea").css("fontWeight","normal"),$scope.lockBold=!0)},$scope.italic=function(e){$(e.currentTarget).toggleClass("active"),$scope.lockItalic?($("#textareaWP textarea").css("fontStyle","italic"),$scope.lockItalic=!1):($("#textareaWP textarea").css("fontStyle","normal"),$scope.lockItalic=!0)},$scope.font=function(e){$(e.currentTarget).toggleClass("active"),$scope.lockFont?($("#textareaWP textarea").css("fontSize","20px"),$scope.lockFont=!1):($("#textareaWP textarea").css("fontSize","14px"),$scope.lockFont=!0)},$scope.left=function(e){$(e.currentTarget).toggleClass("active"),$scope.lockLeft?($("#textareaWP textarea").addClass("text-left"),$scope.lockLeft=!1):($("#textareaWP textarea").removeClass("text-left"),$scope.lockLeft=!0)},$scope.center=function(e){$(e.currentTarget).toggleClass("active"),$scope.lockCenter?($("#textareaWP textarea").addClass("text-center"),$scope.lockCenter=!1):($("#textareaWP textarea").removeClass("text-center"),$scope.lockCenter=!0)},$scope.right=function(e){$(e.currentTarget).toggleClass("active"),$scope.lockRight?($("#textareaWP textarea").addClass("text-right"),$scope.lockRight=!1):($("#textareaWP textarea").removeClass("text-right"),$scope.lockRight=!0)},$scope.Back=function(){$('#myTabs a[href="#Inbox"]').tab("show")}})});
;/*!js/msg/msg.js*/
define("js/msg/msg",function(require){var A=require("js/init");A.controller("msgCtrl",function(){window.onscroll=null})});
;/*!js/news/create/create.js*/
define("js/news/create/create",function(require){var A=require("js/init");A.controller("createNewsCtrl",function($scope,$http,$location){window.onscroll=null,$scope.goToCreateNews=function(){$scope.data.date=(new Date).getTime(),$http.post("action/createnews.php",$scope.data).success(function(res){res&&0===res.errno?$location.path("/newslist/1"):alert("提交失败")})}})});
;/*!js/news/detail/detail.js*/
define("js/news/detail/detail",function(require){var A=require("js/init");A.controller("newsDetailCtrl",function($scope,$http,$stateParams){window.onscroll=null,$http.get("action/newsdetail.php?id="+$stateParams.newsId).success(function(res){res&&0===res.errno&&res.data?$scope.data=res.data:alert("请求失败")})})});
;/*!js/news/list/list.js*/
define("js/news/list/list",function(require){var A=require("js/init");A.controller("newsListCtrl",function($scope,$stateParams,$http){window.onscroll=null,$scope.num=$stateParams.pageNum,$http.get("action/newslist.php?num="+$scope.num).success(function(res){res&&0===res.errno?$scope.list=res.data:alert("请求失败")})})});
;/*!js/user/list/list.js*/
define("js/user/list/list",function(require){var A=require("js/init");A.controller("userListCtrl",function($scope,$stateParams,$http){window.onscroll=null,$scope.num=$stateParams.pageNum,$http.get("action/userlist.php",{params:{num:$scope.num}}).success(function(res){res&&0===res.errno&&res.data?$scope.list=res.data:alert("请求的数据不村咋")}),$scope.showTab=function(e){$(".col-md-2 .littleNav a").removeClass("active"),e.currentTarget.className+=" active";var href=e.target.hash;$("#tabList a[href='"+href+"']").tab("show")},$scope.showTabs=function(e){$(".col-md-2 .littleNav a").removeClass("active");var href=e.currentTarget.getAttribute("href");$(".littleNav a[href='"+href+"']").addClass("active")}})});
;/*!js/user/detail/detail.js*/
define("js/user/detail/detail",function(require){var A=require("js/init");A.controller("userDetailCtrl",function($scope,$stateParams,$http){window.onscroll=null,$http.get("action/userdetail.json?id="+$stateParams.userId).success(function(res){res&&0===res.errno&&res.data?$scope.data=res.data:alert("请求失败")})})});
;/*!js/init.js*/
define("js/init",function(require,exports,module){module.exports=angular.module("myApp",["ui.router"]),require("js/nav/nav"),require("js/router"),require("js/login/login"),require("js/home/home"),require("js/albums/albums"),require("js/mail/mail"),require("js/msg/msg"),require("js/nav/nav"),require("js/news/create/create"),require("js/news/detail/detail"),require("js/news/list/list"),require("js/user/list/list"),require("js/user/detail/detail")});
;/*!js/albums/albums.js*/
define("js/albums/albums",function(require){var A=require("js/init");console.log($),A.controller("albumsCtrl",function($scope,$interval,$element,$timeout,$http){var lock=!0;$scope.ToRight=function(){if(lock){lock=!1;var oldIndex=0;$(".moveUl").animate({left:-290},1e3,function(){var dom=$(".moveUl li").eq(oldIndex).remove();$(this).css("left",0).append(dom),lock=!0})}},$scope.ToLeft=function(){if(lock){lock=!1;var oldIndex=4,dom=$(".moveUl li").eq(oldIndex).remove();$(".moveUl").prepend(dom),$(".moveUl").css("left",-290),$(".moveUl").animate({left:0},1e3,function(){$(this).css("left",0),lock=!0})}};var timer=$interval(function(){$scope.ToRight()},2e3);$element.find($(".lunbo")).hover(function(){$interval.cancel(timer)},function(){timer=$interval(function(){$scope.ToRight()},2e3)}),$timeout(function(){$("[data-toggle='tooltip']").tooltip()},100),$scope.lock=!0,$scope.iPage=1,$scope.showLoading=!0,$scope.getList=function($http){$http.get("action/getPics.php?cpage="+$scope.iPage).success(function(res){res.length&&($scope.getImg(res),$scope.lock=!0)})},$scope.getShort=function(){for(var index=0,ih=$(".pubuliu ul > li").eq(index).height(),i=1;i<$(".pubuliu ul > li").length;i++)$(".pubuliu ul > li").eq(i).height()<ih&&(index=i,ih=$(".pubuliu ul > li").eq(index).height());return index},$scope.getTop=function(obj){var iTop=0;return obj&&(iTop=obj.offsetTop),iTop},window.onscroll=function(){var _index=$scope.getShort(),oLi=$(".pubuliu ul > li")[_index];$scope.getTop(oLi)+oLi.offsetHeight<document.documentElement.clientHeight+$(document).scrollTop()&&$scope.lock&&($scope.lock=!1,$scope.iPage++,$scope.getList($http))},$scope.getImg=function(res){for(var i=0;i<res.length;i++){$scope.num=parseInt(3e3*Math.random());var html=$('<div class="boxWP"><div class="imgDiv"><img src="'+res[i].preview+'"><div><h3>Orange carrot smoothie</h3><p>'+res[i].title+'</p><a href="">Read More</a></div></div><div class="bottom"><span class="btn btn-primary btn-sm">Image & Text</span><span class="midText"><i class="glyphicon glyphicon-time"></i>&emsp;<i class="txt">MAY 5</i></span><span class="like" ng-click="dianzan()"><i class="glyphicon glyphicon-heart"></i>&emsp;<span> '+$scope.num+"</span></span></div></div>");html.find(".imgDiv img").eq(i).width(306),html.find(".imgDiv img").eq(i).height(res[i].height*(306/res[i].width));var idx=$scope.getShort();$(".pubuliu ul > li").eq(idx).append(html),$scope.showLoading=!1}$(".boxWP .bottom .like").click(function(e){if("rgb(255, 0, 0)"===$(e.currentTarget).find("i").css("color"));else{var num=+$(e.currentTarget).find("span").html()+1;$(e.currentTarget).find("span").html(num),$(e.currentTarget).find("i").css("color","red")}})},$scope.getList($http)})});
;/*!js/main.js*/
define("js/main",function(){});