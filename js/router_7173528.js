define("js/router",function(require){require("js/init").config(function($stateProvider){$stateProvider.state("home",{url:"/",templateUrl:"js/home/home.tpl",controller:"homeCtrl"}).state("login",{url:"/login",templateUrl:"js/login/login.tpl",controller:"loginCtrl"}).state("userList",{url:"/userlist/:pageNum",templateUrl:"js/user/list/list.tpl",controller:"userListCtrl"}).state("userDetail",{url:"/userdetail/:userId",templateUrl:"js/user/detail/detail.tpl",controller:"userDetailCtrl"}).state("newsList",{url:"/newslist/:pageNum",templateUrl:"js/news/list/list.tpl",controller:"newsListCtrl"}).state("newsDetail",{url:"/newsdetail/:newsId",templateUrl:"js/news/detail/detail.tpl",controller:"newsDetailCtrl"}).state("createNews",{url:"/createnews",templateUrl:"js/news/create/create.tpl",controller:"createNewsCtrl"}).state("albums",{url:"/albums",templateUrl:"js/albums/albums.tpl",controller:"albumsCtrl"}).state("msg",{url:"/msg",templateUrl:"js/msg/msg.tpl",controller:"msgCtrl"}).state("mail",{url:"/mail/:pageNum",templateUrl:"js/mail/mail.tpl",controller:"mailCtrl"})}).run(function($rootScope,$http,$location){$http.get("action/checkLogin.php").success(function(res){res&&0===res.errno&&res.data?($rootScope.username=res.data.username,$location.path("/")):$location.path("/login")}),$rootScope.isShowNav=!1,$rootScope.$on("$stateChangeSuccess",function(){void 0===$rootScope.username?$location.path("/login"):$rootScope.isShowNav=!0}),$rootScope.$on("$stateChangeSuccess",function(){var path=$location.$$path.slice(1);$rootScope.path=path.split("/")})}).service("Observer",function(){var __message={};this.regist=function(type,fn){__message[type]?__message[type].push(fn):__message[type]=[fn]},this.fire=function(type){var arg=[].slice.call(arguments,0);if(__message[type])for(var i=0;i<__message[type].length;i++)__message[type][i].apply(null,arg)}})});